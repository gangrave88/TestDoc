# НеобходимоПолучатьЕН

## 0. Call Tree

1. Основний метод `НеобходимоПолучатьЕН`
    - *(Виклики відсутні - проста перевірка)*

## 1. High-Level Goal

Визначити, чи потрібно отримувати електронну накладну (ЕН) від кур'єрської служби для даного контейнера. Метод перевіряє, чи входить кур'єрська служба контейнера в список служб, що вимагають отримання ЕН.

## 2. Data Transformations

### Input (Вхід)

**Параметр Контейнер**:
- `Контейнер` *(Обов'язково)*: Посилання на документ Контейнер

### Transformation (Трансформація)

1. **Створення списку кур'єрських служб**:
   - Формується масив назв кур'єрських служб, що вимагають ЕН:
     - "ДЖАСТИН"
     - "НОВА ПОЧТА"
     - "МОСТ ЕКСПРЕСС"
     - "OCTOPUS"
     - "ДОСТАВКА"

2. **Перевірка входження**:
   - Назва кур'єрської служби контейнера переводиться у верхній регістр
   - Виконується пошук в масиві

### Output (Вихід)

**Булеве значення**:
- `Истина` - якщо для контейнера потрібно отримувати ЕН
- `Ложь` (неявне) - якщо ЕН не потрібна

## 3. Process Flow

1. Створити масив `МассивКурьеров`

2. Додати до масиву назви кур'єрських служб:
   1. Додати "ДЖАСТИН"
   2. Додати "НОВА ПОЧТА"
   3. Додати "МОСТ ЭКСПРЕСС"
   4. Додати "OCTOPUS"  
   5. Додати "ДОСТАВКА"

3. **Перевірка наявності**:
   1. Перевести `Контейнер.КурьерскаяСлужба` у верхній регістр через `ВРЕГ()`
   2. Знайти значення в масиві через `МассивКурьеров.Найти()`
   3. ЯКЩО результат пошуку `НЕ = Неопределено`, ТО:
      - Повернути `Истина`

4. ІНАКШЕ:
   - Повернути `Ложь` (неявно)

## 4. Critical Snippet

```bsl
МассивКурьеров = Новый Массив;
МассивКурьеров.Добавить("ДЖАСТИН");
МассивКурьеров.Добавить("НОВА ПОЧТА");
МассивКурьеров.Добавить("МОСТ ЭКСПРЕСС");
МассивКурьеров.Добавить("OCTOPUS");
МассивКурьеров.Добавить("ДОСТАВКА");

Если НЕ МассивКурьеров.Найти(ВРЕГ(Контейнер.КурьерскаяСлужба)) = Неопределено Тогда
    Возврат Истина
КонецЕсли;
```

## 5. Edge Cases & Error Handling

### Особливості реалізації

1. **Регістронезалежна перевірка**:
   - Назва кур'єрської служби переводиться у верхній регістр перед перевіркою
   - В масиві зберігаються назви у верхньому регістрі
   - Це забезпечує регістронезалежне порівняння

2. **Відсутність валідації**:
   - Метод НЕ перевіряє, чи переданий контейнер
   - При `Контейнер = Неопределено` виникне помилка звернення до властивості

3. **Історична логіка (закоментована)**:
   - Раніше логіка була складнішою і залежала від типу контейнера
   - Для "ДЖАСТИН" завжди повертала `Истина`
   - Для "Нова Почта" та "Octopus" перевіряла типи контейнера (1, 2, 4)
   - Поточна реалізація спрощена - не залежить від типу

4. **Список кур'єрських служб**:
   - Список жорстко закодований в методі
   - Для додавання нової служби потрібно змінювати код
   - "ДОСТАВКА" додана окремою заявкою SDEV-7038

5. **Неявне повернення False**:
   - Якщо кур'єрська служба не знайдена, метод завершується без явного `Возврат Ложь`
   - 1С інтерпретує це як повернення `Неопределено`, але в булевому контексті це працює як `Ложь`

### Використання

6. **Контекст виклику**:
   - Використовується в `КомплексноеЗакрытиеКонтейнера` для визначення, чи потрібно отримувати ЕН
   - Використовується для валідації вибору принтера етикеток (тільки для контейнерів з ЕН)
   - Метод позначений як `Экспорт` - може викликатися з інших модулів

### Примітки

- Місцезнаходження: `Документы/Контейнер/МодульМенеджера.bsl`, рядки 3168-3195
- Заявка: SDEV-6348 (Носенко Р.А., 26.10.2020)
- Останнє оновлення: SDEV-7038 (додавання "ДОСТАВКА")
